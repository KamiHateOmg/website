<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staff Management - CS2 Loader</title>
    <meta name="description" content="CS2 Loader staff management interface">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="../assets/images/favicon.ico">
    
    <!-- Styles -->
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/admin.css">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="admin-page">
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="index.html" class="logo">
                    <div class="logo-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8Z"/>
                        </svg>
                    </div>
                    <span class="logo-text">CS2 Loader</span>
                </a>
            </div>
            
            <div class="nav-links">
                <a href="dashboard.html" class="nav-link">Dashboard</a>
                <a href="admin.html" class="nav-link">Admin</a>
                <a href="staff.html" class="nav-link active">Staff</a>
            </div>
            
            <div class="nav-actions">
                <div class="user-menu">
                    <div class="user-avatar" onclick="toggleUserDropdown()">
                        <span id="userInitials">S</span>
                    </div>
                    <div class="user-dropdown" id="userDropdown">
                        <div class="dropdown-header">
                            <span id="userName">Staff</span>
                            <span id="userRole" class="user-role">staff</span>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a href="dashboard.html" class="dropdown-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M13,3V9H21V3M13,21H21V11H13M3,21H11V15H3M3,13H11V3H3V13Z"/>
                            </svg>
                            Dashboard
                        </a>
                        <button onclick="logout()" class="dropdown-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M16,17V14H9V10H16V7L21,12L16,17M14,2A2,2 0 0,1 16,4V6H14V4H5V20H14V18H16V20A2,2 0 0,1 14,22H5A2,2 0 0,1 3,20V4A2,2 0 0,1 5,2H14Z"/>
                            </svg>
                            Logout
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Staff Container -->
    <div class="admin-container">
        <!-- Staff Sidebar -->
        <aside class="admin-sidebar">
            <div class="admin-sidebar-content">
                <div class="admin-section">
                    <h3 class="admin-section-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M13,3V9H21V3M13,21H21V11H13M3,21H11V15H3M3,13H11V3H3V13Z"/>
                        </svg>
                        Overview
                    </h3>
                    <ul class="admin-menu">
                        <li><button class="admin-menu-link active" onclick="showStaffSection('overview')">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M13,3V9H21V3M13,21H21V11H13M3,21H11V15H3M3,13H11V3H3V13Z"/>
                            </svg>
                            Dashboard
                        </button></li>
                        <li><button class="admin-menu-link" onclick="showStaffSection('permissions')">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z"/>
                            </svg>
                            My Permissions
                        </button></li>
                    </ul>
                </div>

                <div class="admin-section">
                    <h3 class="admin-section-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
                        </svg>
                        User Management
                    </h3>
                    <ul class="admin-menu">
                        <li><button class="admin-menu-link" onclick="showStaffSection('users')">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M16,4C18.11,4 19.99,5.89 19.99,8C19.99,10.11 18.11,12 16,12C13.89,12 12,10.11 12,8C12,5.89 13.89,4 16,4M16,14C20.42,14 24,15.79 24,18V20H8V18C8,15.79 11.58,14 16,14M6,6V9H4V6H1V4H4V1H6V4H9V6H6M6,16V19H4V16H1V14H4V11H6V14H9V16H6Z"/>
                            </svg>
                            Manage Users
                            <span class="menu-badge" id="staffUsersBadge">0</span>
                        </button></li>
                        <li><button class="admin-menu-link" onclick="showStaffSection('support')">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12,3C13.75,3 15.3,3.5 16.65,4.45C17.45,5 18.05,5.73 18.46,6.6H21V9H19.5C19.66,9.65 19.75,10.31 19.75,11A7.75,7.75 0 0,1 12,18.75C10.25,18.75 8.7,18.25 7.35,17.3C6.55,16.8 5.95,16.07 5.54,15.2H3V12.8H4.5C4.34,12.15 4.25,11.49 4.25,10.8A7.75,7.75 0 0,1 12,3M12,7A4,4 0 0,0 8,11A4,4 0 0,0 12,15A4,4 0 0,0 16,11A4,4 0 0,0 12,7Z"/>
                            </svg>
                            User Support
                        </button></li>
                    </ul>
                </div>

                <div class="admin-section">
                    <h3 class="admin-section-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19,7H22V9H19V12H17V9H14V7H17V4H19V7M12,2A3,3 0 0,1 15,5V6H19A2,2 0 0,1 21,8V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V8A2,2 0 0,1 5,6H9V5A3,3 0 0,1 12,2M12,4A1,1 0 0,0 11,5V6H13V5A1,1 0 0,0 12,4Z"/>
                        </svg>
                        Product Management
                    </h3>
                    <ul class="admin-menu">
                        <li><button class="admin-menu-link" onclick="showStaffSection('keys')">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M7,14A3,3 0 0,0 10,17A3,3 0 0,0 13,14A3,3 0 0,0 10,11A3,3 0 0,0 7,14M12.65,10C11.83,7.67 9.61,6 7,6A6,6 0 0,0 1,12A6,6 0 0,0 7,18C9.61,18 11.83,16.33 12.65,14H17V18H21V14H23V10H12.65Z"/>
                            </svg>
                            Keys Management
                            <span class="menu-badge" id="staffKeysBadge">0</span>
                        </button></li>
                        <li><button class="admin-menu-link" onclick="showStaffSection('subscriptions')">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z"/>
                            </svg>
                            Subscriptions
                        </button></li>
                    </ul>
                </div>

                <div class="admin-section">
                    <h3 class="admin-section-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                        </svg>
                        Reports
                    </h3>
                    <ul class="admin-menu">
                        <li><button class="admin-menu-link" onclick="showStaffSection('activity')">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                            </svg>
                            Activity Logs
                        </button></li>
                        <li><button class="admin-menu-link" onclick="showStaffSection('reports')">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M22,21H2V3H4V19H6V17H10V19H12V16H16V19H18V17H22V21Z"/>
                            </svg>
                            Usage Reports
                        </button></li>
                    </ul>
                </div>

                <!-- Quick Stats -->
                <div class="admin-stats-overview">
                    <div class="overview-stat">
                        <span class="overview-stat-label">My Access Level</span>
                        <span class="overview-stat-value success" id="staffAccessLevel">Staff</span>
                    </div>
                    <div class="overview-stat">
                        <span class="overview-stat-label">Actions Today</span>
                        <span class="overview-stat-value" id="staffActionsToday">0</span>
                    </div>
                    <div class="overview-stat">
                        <span class="overview-stat-label">Last Login</span>
                        <span class="overview-stat-value" id="staffLastLogin">--</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Staff Main Content -->
        <main class="admin-main">
            <!-- Overview Section -->
            <section id="overview-section" class="admin-section-content active">
                <div class="admin-header">
                    <h1 class="admin-title">Staff Dashboard</h1>
                    <p class="admin-subtitle">Staff management interface and tools</p>
                </div>

                <!-- Staff Overview Cards -->
                <div class="admin-cards-grid">
                    <div class="admin-card">
                        <div class="admin-card-header">
                            <div class="admin-card-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
                                </svg>
                            </div>
                            <div class="admin-card-title">Users Managed</div>
                        </div>
                        <div class="admin-card-content">
                            <div class="admin-metric">
                                <span class="metric-label">Total Users</span>
                                <span class="metric-value" id="staffManagedUsers">0</span>
                            </div>
                            <div class="admin-metric">
                                <span class="metric-label">Active Today</span>
                                <span class="metric-value" id="staffActiveToday">0</span>
                            </div>
                        </div>
                    </div>

                    <div class="admin-card">
                        <div class="admin-card-header">
                            <div class="admin-card-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M7,14A3,3 0 0,0 10,17A3,3 0 0,0 13,14A3,3 0 0,0 10,11A3,3 0 0,0 7,14M12.65,10C11.83,7.67 9.61,6 7,6A6,6 0 0,0 1,12A6,6 0 0,0 7,18C9.61,18 11.83,16.33 12.65,14H17V18H21V14H23V10H12.65Z"/>
                                </svg>
                            </div>
                            <div class="admin-card-title">Keys Generated</div>
                        </div>
                        <div class="admin-card-content">
                            <div class="admin-metric">
                                <span class="metric-label">This Week</span>
                                <span class="metric-value" id="staffKeysWeek">0</span>
                            </div>
                            <div class="admin-metric">
                                <span class="metric-label">Total</span>
                                <span class="metric-value" id="staffKeysTotal">0</span>
                            </div>
                        </div>
                    </div>

                    <div class="admin-card">
                        <div class="admin-card-header">
                            <div class="admin-card-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,3C13.75,3 15.3,3.5 16.65,4.45C17.45,5 18.05,5.73 18.46,6.6H21V9H19.5C19.66,9.65 19.75,10.31 19.75,11A7.75,7.75 0 0,1 12,18.75C10.25,18.75 8.7,18.25 7.35,17.3C6.55,16.8 5.95,16.07 5.54,15.2H3V12.8H4.5C4.34,12.15 4.25,11.49 4.25,10.8A7.75,7.75 0 0,1 12,3M12,7A4,4 0 0,0 8,11A4,4 0 0,0 12,15A4,4 0 0,0 16,11A4,4 0 0,0 12,7Z"/>
                                </svg>
                            </div>
                            <div class="admin-card-title">Support Tickets</div>
                        </div>
                        <div class="admin-card-content">
                            <div class="admin-metric">
                                <span class="metric-label">Open</span>
                                <span class="metric-value" id="staffOpenTickets">0</span>
                            </div>
                            <div class="admin-metric">
                                <span class="metric-label">Resolved</span>
                                <span class="metric-value" id="staffResolvedTickets">0</span>
                            </div>
                        </div>
                    </div>

                    <div class="admin-card">
                        <div class="admin-card-header">
                            <div class="admin-card-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C6.47,22 2,17.5 2,12A10,10 0 0,1 12,2M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z"/>
                                </svg>
                            </div>
                            <div class="admin-card-title">My Activity</div>
                        </div>
                        <div class="admin-card-content">
                            <div class="admin-metric">
                                <span class="metric-label">Actions Today</span>
                                <span class="metric-value" id="staffTodayActions">0</span>
                            </div>
                            <div class="admin-metric">
                                <span class="metric-label">This Week</span>
                                <span class="metric-value" id="staffWeekActions">0</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Actions -->
                <div class="activity-log">
                    <div class="activity-log-header">
                        <h3 class="activity-log-title">My Recent Actions</h3>
                    </div>
                    <div class="activity-log-list" id="staffRecentActions">
                        <div class="admin-loading">
                            <div class="spinner"></div>
                            <p>Loading recent actions...</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Permissions Section -->
            <section id="permissions-section" class="admin-section-content">
                <div class="admin-header">
                    <h1 class="admin-title">My Permissions</h1>
                    <p class="admin-subtitle">View your access level and permitted actions</p>
                </div>

                <div class="admin-form-container">
                    <div class="admin-form-header">
                        <h3 class="admin-form-title">Current Permissions</h3>
                        <p class="admin-form-description">Your role grants you the following permissions</p>
                    </div>

                    <div class="permissions-grid" id="permissionsGrid">
                        <div class="admin-loading">
                            <div class="spinner"></div>
                            <p>Loading permissions...</p>
                        </div>
                    </div>
                </div>

                <!-- Permission Groups -->
                <div class="permission-groups">
                    <div class="permission-group">
                        <h4 class="permission-group-title">User Management</h4>
                        <div class="permission-items">
                            <div class="permission-item">
                                <div class="permission-info">
                                    <span class="permission-name">View Users</span>
                                    <span class="permission-description">View user accounts and basic information</span>
                                </div>
                                <div class="permission-status granted" id="perm-view-users">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                                    </svg>
                                    Granted
                                </div>
                            </div>

                            <div class="permission-item">
                                <div class="permission-info">
                                    <span class="permission-name">Edit Users</span>
                                    <span class="permission-description">Modify user account details and settings</span>
                                </div>
                                <div class="permission-status granted" id="perm-edit-users">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                                    </svg>
                                    Granted
                                </div>
                            </div>

                            <div class="permission-item">
                                <div class="permission-info">
                                    <span class="permission-name">Delete Users</span>
                                    <span class="permission-description">Permanently delete user accounts</span>
                                </div>
                                <div class="permission-status denied" id="perm-delete-users">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
                                    </svg>
                                    Denied
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="permission-group">
                        <h4 class="permission-group-title">Key Management</h4>
                        <div class="permission-items">
                            <div class="permission-item">
                                <div class="permission-info">
                                    <span class="permission-name">Generate Keys</span>
                                    <span class="permission-description">Create new subscription keys</span>
                                </div>
                                <div class="permission-status granted" id="perm-generate-keys">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                                    </svg>
                                    Granted
                                </div>
                            </div>

                            <div class="permission-item">
                                <div class="permission-info">
                                    <span class="permission-name">View Keys</span>
                                    <span class="permission-description">View all subscription keys and their status</span>
                                </div>
                                <div class="permission-status granted" id="perm-view-keys">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                                    </svg>
                                    Granted
                                </div>
                            </div>

                            <div class="permission-item">
                                <div class="permission-info">
                                    <span class="permission-name">Revoke Keys</span>
                                    <span class="permission-description">Deactivate subscription keys</span>
                                </div>
                                <div class="permission-status limited" id="perm-revoke-keys">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/>
                                    </svg>
                                    Limited
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="permission-group">
                        <h4 class="permission-group-title">System Access</h4>
                        <div class="permission-items">
                            <div class="permission-item">
                                <div class="permission-info">
                                    <span class="permission-name">View Logs</span>
                                    <span class="permission-description">Access system and audit logs</span>
                                </div>
                                <div class="permission-status granted" id="perm-view-logs">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                                    </svg>
                                    Granted
                                </div>
                            </div>

                            <div class="permission-item">
                                <div class="permission-info">
                                    <span class="permission-name">System Maintenance</span>
                                    <span class="permission-description">Perform system cleanup and maintenance</span>
                                </div>
                                <div class="permission-status denied" id="perm-maintenance">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
                                    </svg>
                                    Denied
                                </div>
                            </div>

                            <div class="permission-item">
                                <div class="permission-info">
                                    <span class="permission-name">Admin Dashboard</span>
                                    <span class="permission-description">Access full administrative interface</span>
                                </div>
                                <div class="permission-status denied" id="perm-admin-dashboard">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
                                    </svg>
                                    Denied
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Users Section -->
            <section id="users-section" class="admin-section-content">
                <div class="admin-header">
                    <h1 class="admin-title">User Management</h1>
                    <p class="admin-subtitle">Manage user accounts and permissions</p>
                </div>

                <div class="admin-action-bar">
                    <div class="admin-action-buttons">
                        <button class="admin-btn admin-btn-primary" onclick="showCreateUserModal()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
                            </svg>
                            Add User
                        </button>
                        <button class="admin-btn admin-btn-outline" onclick="exportUsers()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                            </svg>
                            Export Users
                        </button>
                    </div>
                </div>

                <!-- Users Table -->
                <div class="admin-table-container">
                    <div class="admin-table-header">
                        <h3 class="admin-table-title">All Users</h3>
                        <div class="admin-table-actions">
                            <div class="admin-search">
                                <svg class="admin-search-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                                </svg>
                                <input type="text" class="admin-search-input" placeholder="Search users..." id="staffUsersSearch">
                            </div>
                            <select class="admin-filter-select" id="staffUsersFilter">
                                <option value="all">All Users</option>
                                <option value="user">Regular Users</option>
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                            </select>
                        </div>
                    </div>

                    <table class="admin-table" id="staffUsersTable">
                        <thead>
                            <tr>
                                <th class="sortable" onclick="sortStaffUsersTable('email')">User</th>
                                <th class="sortable" onclick="sortStaffUsersTable('role')">Role</th>
                                <th class="sortable" onclick="sortStaffUsersTable('created_at')">Joined</th>
                                <th class="sortable" onclick="sortStaffUsersTable('last_login')">Last Login</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="staffUsersTableBody">
                            <tr>
                                <td colspan="6">
                                    <div class="admin-loading">
                                        <div class="spinner"></div>
                                        <p>Loading users...</p>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="admin-pagination" id="staffUsersPagination">
                        <div class="pagination-info">
                            Showing <span id="staffUsersStart">0</span> to <span id="staffUsersEnd">0</span> of <span id="staffUsersTotal">0</span> users
                        </div>
                        <div class="pagination-controls" id="staffUsersPaginationControls">
                            <!-- Pagination buttons will be generated here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Support Section -->
            <section id="support-section" class="admin-section-content">
                <div class="admin-header">
                    <h1 class="admin-title">User Support</h1>
                    <p class="admin-subtitle">Handle user support requests and issues</p>
                </div>

                <!-- Support Tickets -->
                <div class="admin-table-container">
                    <div class="admin-table-header">
                        <h3 class="admin-table-title">Support Tickets</h3>
                        <div class="admin-table-actions">
                            <div class="admin-search">
                                <svg class="admin-search-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                                </svg>
                                <input type="text" class="admin-search-input" placeholder="Search tickets..." id="supportTicketsSearch">
                            </div>
                            <select class="admin-filter-select" id="supportTicketsFilter">
                                <option value="all">All Tickets</option>
                                <option value="open">Open</option>
                                <option value="in-progress">In Progress</option>
                                <option value="resolved">Resolved</option>
                                <option value="closed">Closed</option>
                            </select>
                        </div>
                    </div>

                    <div class="support-tickets-list" id="supportTicketsList">
                        <div class="admin-loading">
                            <div class="spinner"></div>
                            <p>Loading support tickets...</p>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="support-quick-actions">
                    <h3>Quick Actions</h3>
                    <div class="quick-actions-grid">
                        <button class="quick-action-card" onclick="showMassMessageModal()">
                            <div class="quick-action-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M20,8L12,13L4,8V6L12,11L20,6M20,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6C22,4.89 21.1,4 20,4Z"/>
                                </svg>
                            </div>
                            <h4>Send Mass Message</h4>
                            <p>Send notifications to multiple users</p>
                        </button>

                        <button class="quick-action-card" onclick="showUserLookupModal()">
                            <div class="quick-action-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                                </svg>
                            </div>
                            <h4>User Lookup</h4>
                            <p>Search for user information</p>
                        </button>

                        <button class="quick-action-card" onclick="showBulkKeyModal()">
                            <div class="quick-action-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M7,14A3,3 0 0,0 10,17A3,3 0 0,0 13,14A3,3 0 0,0 10,11A3,3 0 0,0 7,14M12.65,10C11.83,7.67 9.61,6 7,6A6,6 0 0,0 1,12A6,6 0 0,0 7,18C9.61,18 11.83,16.33 12.65,14H17V18H21V14H23V10H12.65Z"/>
                                </svg>
                            </div>
                            <h4>Generate Keys</h4>
                            <p>Bulk generate subscription keys</p>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Keys Section -->
            <section id="keys-section" class="admin-section-content">
                <div class="admin-header">
                    <h1 class="admin-title">Keys Management</h1>
                    <p class="admin-subtitle">Generate and manage subscription keys</p>
                </div>

                <div class="admin-action-bar">
                    <div class="admin-action-buttons">
                        <button class="admin-btn admin-btn-primary" onclick="showStaffGenerateKeysModal()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
                            </svg>
                            Generate Keys
                        </button>
                        <button class="admin-btn admin-btn-outline" onclick="exportStaffKeys()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                            </svg>
                            Export Keys
                        </button>
                    </div>
                </div>

                <!-- Keys Statistics -->
                <div class="admin-cards-grid" style="margin-bottom: 2rem;">
                    <div class="admin-card">
                        <div class="admin-card-header">
                            <div class="admin-card-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M7,14A3,3 0 0,0 10,17A3,3 0 0,0 13,14A3,3 0 0,0 10,11A3,3 0 0,0 7,14M12.65,10C11.83,7.67 9.61,6 7,6A6,6 0 0,0 1,12A6,6 0 0,0 7,18C9.61,18 11.83,16.33 12.65,14H17V18H21V14H23V10H12.65Z"/>
                                </svg>
                            </div>
                            <div class="admin-card-title">Available Keys</div>
                        </div>
                        <div class="admin-card-content">
                            <div class="admin-metric">
                                <span class="metric-label">Unredeemed</span>
                                <span class="metric-value" id="staffAvailableKeys">0</span>
                            </div>
                        </div>
                    </div>

                    <div class="admin-card">
                        <div class="admin-card-header">
                            <div class="admin-card-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                                </svg>
                            </div>
                            <div class="admin-card-title">Redeemed Keys</div>
                        </div>
                        <div class="admin-card-content">
                            <div class="admin-metric">
                                <span class="metric-label">Total</span>
                                <span class="metric-value" id="staffRedeemedKeys">0</span>
                            </div>
                        </div>
                    </div>

                    <div class="admin-card">
                        <div class="admin-card-header">
                            <div class="admin-card-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z"/>
                                </svg>
                            </div>
                            <div class="admin-card-title">Expired Keys</div>
                        </div>
                        <div class="admin-card-content">
                            <div class="admin-metric">
                                <span class="metric-label">Total</span>
                                <span class="metric-value" id="staffExpiredKeys">0</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Keys Table -->
                <div class="admin-table-container">
                    <div class="admin-table-header">
                        <h3 class="admin-table-title">All Keys</h3>
                        <div class="admin-table-actions">
                            <div class="admin-search">
                                <svg class="admin-search-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                                </svg>
                                <input type="text" class="admin-search-input" placeholder="Search keys..." id="staffKeysSearch">
                            </div>
                            <select class="admin-filter-select" id="staffKeysFilter">
                                <option value="all">All Keys</option>
                                <option value="unredeemed">Unredeemed</option>
                                <option value="redeemed">Redeemed</option>
                                <option value="expired">Expired</option>
                            </select>
                        </div>
                    </div>

                    <table class="admin-table" id="staffKeysTable">
                        <thead>
                            <tr>
                                <th class="sortable" onclick="sortStaffKeysTable('key_code')">Key Code</th>
                                <th class="sortable" onclick="sortStaffKeysTable('product_name')">Product</th>
                                <th class="sortable" onclick="sortStaffKeysTable('created_at')">Generated</th>
                                <th class="sortable" onclick="sortStaffKeysTable('redeemed_at')">Redeemed</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="staffKeysTableBody">
                            <tr>
                                <td colspan="6">
                                    <div class="admin-loading">
                                        <div class="spinner"></div>
                                        <p>Loading keys...</p>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="admin-pagination" id="staffKeysPagination">
                        <div class="pagination-info">
                            Showing <span id="staffKeysStart">0</span> to <span id="staffKeysEnd">0</span> of <span id="staffKeysTotal">0</span> keys
                        </div>
                        <div class="pagination-controls" id="staffKeysPaginationControls">
                            <!-- Pagination buttons will be generated here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Subscriptions Section -->
            <section id="subscriptions-section" class="admin-section-content">
                <div class="admin-header">
                    <h1 class="admin-title">Subscriptions</h1>
                    <p class="admin-subtitle">Monitor and manage user subscriptions</p>
                </div>

                <div class="admin-table-container">
                    <div class="admin-table-header">
                        <h3 class="admin-table-title">Active Subscriptions</h3>
                        <div class="admin-table-actions">
                            <div class="admin-search">
                                <svg class="admin-search-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                                </svg>
                                <input type="text" class="admin-search-input" placeholder="Search subscriptions..." id="staffSubscriptionsSearch">
                            </div>
                            <select class="admin-filter-select" id="staffSubscriptionsFilter">
                                <option value="all">All Subscriptions</option>
                                <option value="active">Active</option>
                                <option value="expired">Expired</option>
                                <option value="expiring">Expiring Soon</option>
                            </select>
                        </div>
                    </div>

                    <table class="admin-table" id="staffSubscriptionsTable">
                        <thead>
                            <tr>
                                <th class="sortable" onclick="sortStaffSubscriptionsTable('user_email')">User</th>
                                <th class="sortable" onclick="sortStaffSubscriptionsTable('product_name')">Product</th>
                                <th class="sortable" onclick="sortStaffSubscriptionsTable('created_at')">Started</th>
                                <th class="sortable" onclick="sortStaffSubscriptionsTable('expires_at')">Expires</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="staffSubscriptionsTableBody">
                            <tr>
                                <td colspan="6">
                                    <div class="admin-loading">
                                        <div class="spinner"></div>
                                        <p>Loading subscriptions...</p>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="admin-pagination" id="staffSubscriptionsPagination">
                        <div class="pagination-info">
                            Showing <span id="staffSubscriptionsStart">0</span> to <span id="staffSubscriptionsEnd">0</span> of <span id="staffSubscriptionsTotal">0</span> subscriptions
                        </div>
                        <div class="pagination-controls" id="staffSubscriptionsPaginationControls">
                            <!-- Pagination buttons will be generated here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Activity Logs Section -->
            <section id="activity-section" class="admin-section-content">
                <div class="admin-header">
                    <h1 class="admin-title">Activity Logs</h1>
                    <p class="admin-subtitle">View system activity and audit logs</p>
                </div>

                <div class="admin-table-container">
                    <div class="admin-table-header">
                        <h3 class="admin-table-title">System Activity</h3>
                        <div class="admin-table-actions">
                            <div class="admin-search">
                                <svg class="admin-search-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                                </svg>
                                <input type="text" class="admin-search-input" placeholder="Search logs..." id="staffLogsSearch">
                            </div>
                            <select class="admin-filter-select" id="staffLogsFilter">
                                <option value="all">All Actions</option>
                                <option value="LOGIN">Logins</option>
                                <option value="KEY_REDEEM">Key Redemptions</option>
                                <option value="PURCHASE">Purchases</option>
                                <option value="STAFF">Staff Actions</option>
                            </select>
                        </div>
                    </div>

                    <table class="admin-table" id="staffLogsTable">
                        <thead>
                            <tr>
                                <th class="sortable" onclick="sortStaffLogsTable('created_at')">Timestamp</th>
                                <th class="sortable" onclick="sortStaffLogsTable('action')">Action</th>
                                <th class="sortable" onclick="sortStaffLogsTable('user_email')">User</th>
                                <th>Details</th>
                                <th>IP Address</th>
                            </tr>
                        </thead>
                        <tbody id="staffLogsTableBody">
                            <tr>
                                <td colspan="5">
                                    <div class="admin-loading">
                                        <div class="spinner"></div>
                                        <p>Loading activity logs...</p>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="admin-pagination" id="staffLogsPagination">
                        <div class="pagination-info">
                            Showing <span id="staffLogsStart">0</span> to <span id="staffLogsEnd">0</span> of <span id="staffLogsTotal">0</span> logs
                        </div>
                        <div class="pagination-controls" id="staffLogsPaginationControls">
                            <!-- Pagination buttons will be generated here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Reports Section -->
            <section id="reports-section" class="admin-section-content">
                <div class="admin-header">
                    <h1 class="admin-title">Usage Reports</h1>
                    <p class="admin-subtitle">Generate and view system usage reports</p>
                </div>

                <!-- Report Generation -->
                <div class="admin-form-container">
                    <div class="admin-form-header">
                        <h3 class="admin-form-title">Generate Report</h3>
                        <p class="admin-form-description">Create custom reports for analysis</p>
                    </div>

                    <form id="reportGenerationForm" class="report-form">
                        <div class="admin-form-grid">
                            <div class="admin-form-group">
                                <label for="reportType" class="admin-form-label">Report Type</label>
                                <select id="reportType" name="reportType" class="admin-form-select" required>
                                    <option value="">Select Report Type</option>
                                    <option value="user-activity">User Activity</option>
                                    <option value="key-usage">Key Usage</option>
                                    <option value="subscription-trends">Subscription Trends</option>
                                    <option value="support-metrics">Support Metrics</option>
                                </select>
                            </div>

                            <div class="admin-form-group">
                                <label for="reportDateRange" class="admin-form-label">Date Range</label>
                                <select id="reportDateRange" name="dateRange" class="admin-form-select" required>
                                    <option value="7d">Last 7 Days</option>
                                    <option value="30d">Last 30 Days</option>
                                    <option value="90d">Last 90 Days</option>
                                    <option value="custom">Custom Range</option>
                                </select>
                            </div>

                            <div class="admin-form-group" id="customDateRange" style="display: none;">
                                <label for="startDate" class="admin-form-label">Start Date</label>
                                <input type="date" id="startDate" name="startDate" class="admin-form-input">
                            </div>

                            <div class="admin-form-group" id="customDateRangeEnd" style="display: none;">
                                <label for="endDate" class="admin-form-label">End Date</label>
                                <input type="date" id="endDate" name="endDate" class="admin-form-input">
                            </div>
                        </div>

                        <div class="admin-form-actions">
                            <button type="submit" class="admin-btn admin-btn-primary">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M22,21H2V3H4V19H6V17H10V19H12V16H16V19H18V17H22V21Z"/>
                                </svg>
                                Generate Report
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Recent Reports -->
                <div class="admin-table-container">
                    <div class="admin-table-header">
                        <h3 class="admin-table-title">Recent Reports</h3>
                    </div>

                    <div class="reports-list" id="recentReportsList">
                        <div class="admin-loading">
                            <div class="spinner"></div>
                            <p>Loading recent reports...</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Include Modals Component -->
    <!-- This would normally be included from components/modals.html -->

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Loading...</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../assets/js/api.js"></script>
    <script src="../assets/js/auth.js"></script>
    
                    <script>
        // Staff Management JavaScript
        class StaffManager {
            constructor() {
                this.currentSection = 'overview';
                this.userInfo = null;
                this.permissions = [];
                this.currentPage = {
                    users: 1,
                    keys: 1,
                    subscriptions: 1,
                    logs: 1
                };
                this.searchTimeout = null;
                this.init();
            }

            async init() {
                // Check authentication and permissions
                if (!this.checkAuth()) {
                    window.location.href = 'login.html';
                    return;
                }

                this.setupEventListeners();
                await this.loadUserData();
                await this.loadPermissions();
                this.updateNavigation();
                this.startAutoRefresh();
            }

            checkAuth() {
                const token = localStorage.getItem('token');
                const user = JSON.parse(localStorage.getItem('user') || '{}');
                return token && user && (user.role === 'staff' || user.role === 'admin');
            }

            setupEventListeners() {
                // Report date range change
                const reportDateRange = document.getElementById('reportDateRange');
                if (reportDateRange) {
                    reportDateRange.addEventListener('change', this.toggleCustomDateRange);
                }

                // Report generation form
                const reportForm = document.getElementById('reportGenerationForm');
                if (reportForm) {
                    reportForm.addEventListener('submit', (e) => this.generateReport(e));
                }

                // Search inputs and filters
                this.setupSearchListeners();
                this.setupFilterListeners();
            }

            setupSearchListeners() {
                const searchInputs = [
                    'staffUsersSearch',
                    'supportTicketsSearch',
                    'staffKeysSearch',
                    'staffSubscriptionsSearch',
                    'staffLogsSearch'
                ];

                searchInputs.forEach(inputId => {
                    const input = document.getElementById(inputId);
                    if (input) {
                        input.addEventListener('input', () => this.debounceSearch(inputId));
                    }
                });
            }

            setupFilterListeners() {
                const filters = [
                    'staffUsersFilter',
                    'supportTicketsFilter',
                    'staffKeysFilter',
                    'staffSubscriptionsFilter',
                    'staffLogsFilter'
                ];

                filters.forEach(filterId => {
                    const filter = document.getElementById(filterId);
                    if (filter) {
                        filter.addEventListener('change', () => this.handleFilterChange(filterId));
                    }
                });
            }

            debounceSearch(inputId) {
                clearTimeout(this.searchTimeout);
                this.searchTimeout = setTimeout(() => {
                    this.performSearch(inputId);
                }, 300);
            }

            performSearch(inputId) {
                const input = document.getElementById(inputId);
                const query = input.value.trim();
                
                switch(inputId) {
                    case 'staffUsersSearch':
                        this.loadUsers(1, query);
                        break;
                    case 'supportTicketsSearch':
                        this.loadSupportTickets(1, query);
                        break;
                    case 'staffKeysSearch':
                        this.loadKeys(1, query);
                        break;
                    case 'staffSubscriptionsSearch':
                        this.loadSubscriptions(1, query);
                        break;
                    case 'staffLogsSearch':
                        this.loadActivityLogs(1, query);
                        break;
                }
            }

            handleFilterChange(filterId) {
                switch(filterId) {
                    case 'staffUsersFilter':
                        this.loadUsers(1);
                        break;
                    case 'supportTicketsFilter':
                        this.loadSupportTickets(1);
                        break;
                    case 'staffKeysFilter':
                        this.loadKeys(1);
                        break;
                    case 'staffSubscriptionsFilter':
                        this.loadSubscriptions(1);
                        break;
                    case 'staffLogsFilter':
                        this.loadActivityLogs(1);
                        break;
                }
            }

            updateNavigation() {
                const user = JSON.parse(localStorage.getItem('user'));
                if (user) {
                    document.getElementById('userName').textContent = user.email;
                    document.getElementById('userRole').textContent = user.role;
                    document.getElementById('userInitials').textContent = user.email.charAt(0).toUpperCase();
                }
            }

            async loadUserData() {
                try {
                    this.showLoading('Loading dashboard data...');
                    
                    // Load staff overview data
                    await this.loadStaffOverview();
                    
                } catch (error) {
                    console.error('Error loading user data:', error);
                    this.showError('Failed to load dashboard data');
                } finally {
                    this.hideLoading();
                }
            }

            async loadPermissions() {
                try {
                    const response = await fetch(`${API_BASE_URL}/users/permissions`, {
                        headers: this.getAuthHeaders()
                    });

                    if (response.ok) {
                        const data = await response.json();
                        this.permissions = data.permissions || [];
                        this.updatePermissionsDisplay();
                    }
                } catch (error) {
                    console.error('Error loading permissions:', error);
                }
            }

            async loadStaffOverview() {
                try {
                    const response = await fetch(`${API_BASE_URL}/staff/overview`, {
                        headers: this.getAuthHeaders()
                    });

                    if (response.ok) {
                        const data = await response.json();
                        this.updateOverviewDisplay(data);
                    } else {
                        // Mock data for demonstration
                        const mockData = {
                            managedUsers: 142,
                            activeToday: 28,
                            keysThisWeek: 15,
                            totalKeys: 89,
                            openTickets: 3,
                            resolvedTickets: 12,
                            actionsToday: 7,
                            actionsThisWeek: 34,
                            accessLevel: 'Staff',
                            lastLogin: new Date().toISOString(),
                            recentActions: [
                                {
                                    action: 'USER_UPDATE',
                                    description: 'Updated user account settings',
                                    details: 'Modified permissions for user@example.com',
                                    createdAt: new Date(Date.now() - 30000).toISOString()
                                },
                                {
                                    action: 'KEY_GENERATE',
                                    description: 'Generated bulk keys',
                                    details: 'Created 10 keys for Premium Monthly',
                                    createdAt: new Date(Date.now() - 300000).toISOString()
                                }
                            ]
                        };
                        this.updateOverviewDisplay(mockData);
                    }
                } catch (error) {
                    console.error('Error loading staff overview:', error);
                }
            }

            async loadUsers(page = 1, search = '') {
                try {
                    const searchQuery = search || document.getElementById('staffUsersSearch')?.value || '';
                    const filter = document.getElementById('staffUsersFilter')?.value || 'all';
                    
                    const params = new URLSearchParams({
                        page: page,
                        limit: 20,
                        search: searchQuery,
                        filter: filter
                    });

                    const response = await fetch(`${API_BASE_URL}/staff/users?${params}`, {
                        headers: this.getAuthHeaders()
                    });

                    if (response.ok) {
                        const data = await response.json();
                        this.updateUsersTable(data);
                        this.updateUsersPagination(data.pagination);
                    } else {
                        this.showError('Failed to load users');
                        this.showEmptyUsersTable();
                    }
                } catch (error) {
                    console.error('Error loading users:', error);
                    this.showEmptyUsersTable();
                }
            }

            async loadSupportTickets(page = 1, search = '') {
                try {
                    const searchQuery = search || document.getElementById('supportTicketsSearch')?.value || '';
                    const filter = document.getElementById('supportTicketsFilter')?.value || 'all';
                    
                    const params = new URLSearchParams({
                        page: page,
                        limit: 20,
                        search: searchQuery,
                        status: filter
                    });

                    const response = await fetch(`${API_BASE_URL}/staff/support/tickets?${params}`, {
                        headers: this.getAuthHeaders()
                    });

                    if (response.ok) {
                        const data = await response.json();
                        this.updateSupportTicketsDisplay(data.tickets || []);
                    } else {
                        this.showEmptySupportTickets();
                    }
                } catch (error) {
                    console.error('Error loading support tickets:', error);
                    this.showEmptySupportTickets();
                }
            }

            async loadKeys(page = 1, search = '') {
                try {
                    const searchQuery = search || document.getElementById('staffKeysSearch')?.value || '';
                    const filter = document.getElementById('staffKeysFilter')?.value || 'all';
                    
                    const params = new URLSearchParams({
                        page: page,
                        limit: 20,
                        search: searchQuery,
                        filter: filter
                    });

                    const response = await fetch(`${API_BASE_URL}/staff/keys?${params}`, {
                        headers: this.getAuthHeaders()
                    });

                    if (response.ok) {
                        const data = await response.json();
                        this.updateKeysTable(data);
                        this.updateKeysPagination(data.pagination);
                        this.updateKeysStats(data.stats);
                    } else {
                        this.showEmptyKeysTable();
                    }
                } catch (error) {
                    console.error('Error loading keys:', error);
                    this.showEmptyKeysTable();
                }
            }

            async loadSubscriptions(page = 1, search = '') {
                try {
                    const searchQuery = search || document.getElementById('staffSubscriptionsSearch')?.value || '';
                    const filter = document.getElementById('staffSubscriptionsFilter')?.value || 'all';
                    
                    const params = new URLSearchParams({
                        page: page,
                        limit: 20,
                        search: searchQuery,
                        filter: filter
                    });

                    const response = await fetch(`${API_BASE_URL}/staff/subscriptions?${params}`, {
                        headers: this.getAuthHeaders()
                    });

                    if (response.ok) {
                        const data = await response.json();
                        this.updateSubscriptionsTable(data);
                        this.updateSubscriptionsPagination(data.pagination);
                    } else {
                        this.showEmptySubscriptionsTable();
                    }
                } catch (error) {
                    console.error('Error loading subscriptions:', error);
                    this.showEmptySubscriptionsTable();
                }
            }

            async loadActivityLogs(page = 1, search = '') {
                try {
                    const searchQuery = search || document.getElementById('staffLogsSearch')?.value || '';
                    const filter = document.getElementById('staffLogsFilter')?.value || 'all';
                    
                    const params = new URLSearchParams({
                        page: page,
                        limit: 20,
                        search: searchQuery,
                        action: filter
                    });

                    const response = await fetch(`${API_BASE_URL}/staff/logs?${params}`, {
                        headers: this.getAuthHeaders()
                    });

                    if (response.ok) {
                        const data = await response.json();
                        this.updateLogsTable(data);
                        this.updateLogsPagination(data.pagination);
                    } else {
                        this.showEmptyLogsTable();
                    }
                } catch (error) {
                    console.error('Error loading activity logs:', error);
                    this.showEmptyLogsTable();
                }
            }

            updateOverviewDisplay(data) {
                // Update overview cards
                this.updateElement('staffManagedUsers', data.managedUsers || 0);
                this.updateElement('staffActiveToday', data.activeToday || 0);
                this.updateElement('staffKeysWeek', data.keysThisWeek || 0);
                this.updateElement('staffKeysTotal', data.totalKeys || 0);
                this.updateElement('staffOpenTickets', data.openTickets || 0);
                this.updateElement('staffResolvedTickets', data.resolvedTickets || 0);
                this.updateElement('staffTodayActions', data.actionsToday || 0);
                this.updateElement('staffWeekActions', data.actionsThisWeek || 0);

                // Update sidebar stats
                this.updateElement('staffUsersBadge', data.managedUsers || 0);
                this.updateElement('staffKeysBadge', data.totalKeys || 0);
                this.updateElement('staffAccessLevel', data.accessLevel || 'Staff');
                this.updateElement('staffActionsToday', data.actionsToday || 0);
                this.updateElement('staffLastLogin', this.formatDate(data.lastLogin) || '--');

                // Update recent actions
                this.updateRecentActions(data.recentActions || []);
            }

            updateElement(id, value) {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = value;
                }
            }

            updatePermissionsDisplay() {
                const permissionElements = {
                    'view-users': document.getElementById('perm-view-users'),
                    'edit-users': document.getElementById('perm-edit-users'),
                    'delete-users': document.getElementById('perm-delete-users'),
                    'generate-keys': document.getElementById('perm-generate-keys'),
                    'view-keys': document.getElementById('perm-view-keys'),
                    'revoke-keys': document.getElementById('perm-revoke-keys'),
                    'view-logs': document.getElementById('perm-view-logs'),
                    'maintenance': document.getElementById('perm-maintenance'),
                    'admin-dashboard': document.getElementById('perm-admin-dashboard')
                };

                // Default staff permissions
                const defaultStaffPermissions = ['view-users', 'edit-users', 'generate-keys', 'view-keys', 'view-logs'];

                Object.keys(permissionElements).forEach(permission => {
                    const element = permissionElements[permission];
                    if (element) {
                        const hasPermission = this.permissions.includes(permission) || defaultStaffPermissions.includes(permission);
                        const isLimited = permission === 'revoke-keys';
                        
                        let statusClass = 'denied';
                        let statusText = 'Denied';
                        let statusIcon = '<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/></svg>';
                        
                        if (hasPermission) {
                            statusClass = 'granted';
                            statusText = 'Granted';
                            statusIcon = '<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg>';
                        } else if (isLimited) {
                            statusClass = 'limited';
                            statusText = 'Limited';
                            statusIcon = '<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/></svg>';
                        }
                        
                        element.className = `permission-status ${statusClass}`;
                        element.innerHTML = `${statusIcon} ${statusText}`;
                    }
                });
            }

            updateRecentActions(actions) {
                const container = document.getElementById('staffRecentActions');
                if (!container) return;

                if (actions.length === 0) {
                    container.innerHTML = `
                        <div class="admin-empty-state">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                            </svg>
                            <h3>No Recent Actions</h3>
                            <p>Your recent staff actions will appear here</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = actions.map(action => `
                    <div class="activity-log-item">
                        <div class="activity-log-icon ${this.getActionType(action.action)}">
                            ${this.getActionIcon(action.action)}
                        </div>
                        <div class="activity-log-content">
                            <div class="activity-log-message">${action.description}</div>
                            <div class="activity-log-details">${action.details || ''}</div>
                        </div>
                        <div class="activity-log-time">${this.formatTimeAgo(action.createdAt)}</div>
                    </div>
                `).join('');
            }

            updateUsersTable(data) {
                const tbody = document.getElementById('staffUsersTableBody');
                if (!tbody) return;

                if (!data.users || data.users.length === 0) {
                    tbody.innerHTML = `
                        <tr>
                            <td colspan="6">
                                <div class="admin-empty-state">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
                                    </svg>
                                    <h3>No Users Found</h3>
                                    <p>No users match your current search criteria</p>
                                </div>
                            </td>
                        </tr>
                    `;
                    return;
                }

                tbody.innerHTML = data.users.map(user => `
                    <tr>
                        <td>
                            <div class="table-user">
                                <div class="table-user-avatar">
                                    ${user.email.charAt(0).toUpperCase()}
                                </div>
                                <div class="table-user-info">
                                    <div class="table-user-name">${user.email}</div>
                                    <div class="table-user-email">ID: ${user.id.substring(0, 8)}...</div>
                                </div>
                            </div>
                        </td>
                        <td>
                            <span class="table-status ${user.role}">${user.role}</span>
                        </td>
                        <td>${this.formatDate(user.createdAt)}</td>
                        <td>${this.formatDate(user.lastLogin) || 'Never'}</td>
                        <td>
                            <span class="table-status ${user.isActive ? 'active' : 'inactive'}">
                                ${user.isActive ? 'Active' : 'Inactive'}
                            </span>
                        </td>
                        <td>
                            <div class="table-actions">
                                <button class="table-action-btn" onclick="viewUser('${user.id}')" title="View User">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"/>
                                    </svg>
                                </button>
                                <button class="table-action-btn" onclick="editUser('${user.id}')" title="Edit User">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"/>
                                    </svg>
                                </button>
                            </div>
                        </td>
                    </tr>
                `).join('');
            }

            updateSupportTicketsDisplay(tickets) {
                const container = document.getElementById('supportTicketsList');
                if (!container) return;

                if (tickets.length === 0) {
                    container.innerHTML = `
                        <div class="admin-empty-state">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12,3C13.75,3 15.3,3.5 16.65,4.45C17.45,5 18.05,5.73 18.46,6.6H21V9H19.5C19.66,9.65 19.75,10.31 19.75,11A7.75,7.75 0 0,1 12,18.75C10.25,18.75 8.7,18.25 7.35,17.3C6.55,16.8 5.95,16.07 5.54,15.2H3V12.8H4.5C4.34,12.15 4.25,11.49 4.25,10.8A7.75,7.75 0 0,1 12,3M12,7A4,4 0 0,0 8,11A4,4 0 0,0 12,15A4,4 0 0,0 16,11A4,4 0 0,0 12,7Z"/>
                            </svg>
                            <h3>No Support Tickets</h3>
                            <p>All caught up! No support tickets require attention.</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = tickets.map(ticket => `
                    <div class="support-ticket-item">
                        <div class="ticket-info">
                            <div class="ticket-priority ${ticket.priority}"></div>
                            <div class="ticket-details">
                                <h4>${ticket.title}</h4>
                                <p>From: ${ticket.userEmail}  ${ticket.category}</p>
                            </div>
                        </div>
                        <div class="ticket-meta">
                            <span class="ticket-status ${ticket.status}">${ticket.status.replace('-', ' ')}</span>
                            <span class="ticket-time">${this.formatTimeAgo(ticket.createdAt)}</span>
                        </div>
                    </div>
                `).join('');
            }

            updateKeysTable(data) {
                const tbody = document.getElementById('staffKeysTableBody');
                if (!tbody) return;

                if (!data.keys || data.keys.length === 0) {
                    this.showEmptyKeysTable();
                    return;
                }

                tbody.innerHTML = data.keys.map(key => `
                    <tr>
                        <td>
                            <code style="font-family: monospace; background: var(--tertiary-bg); padding: 0.25rem 0.5rem; border-radius: 4px;">${key.keyCode}</code>
                        </td>
                        <td>${key.productName}</td>
                        <td>${this.formatDate(key.createdAt)}</td>
                        <td>${key.redeemedAt ? this.formatDate(key.redeemedAt) : 'Not redeemed'}</td>
                        <td>
                            <span class="table-status ${key.isRedeemed ? 'redeemed' : key.isExpired ? 'expired' : 'active'}">
                                ${key.isRedeemed ? 'Redeemed' : key.isExpired ? 'Expired' : 'Available'}
                            </span>
                        </td>
                        <td>
                            <div class="table-actions">
                                <button class="table-action-btn" onclick="copyToClipboard('${key.keyCode}')" title="Copy Key">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
                                    </svg>
                                </button>
                                ${!key.isRedeemed && !key.isExpired ? `
                                    <button class="table-action-btn danger" onclick="revokeKey('${key.id}')" title="Revoke Key">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"/>
                                        </svg>
                                    </button>
                                ` : ''}
                            </div>
                        </td>
                    </tr>
                `).join('');
            }

            updateKeysStats(stats) {
                if (stats) {
                    this.updateElement('staffAvailableKeys', stats.available || 0);
                    this.updateElement('staffRedeemedKeys', stats.redeemed || 0);
                    this.updateElement('staffExpiredKeys', stats.expired || 0);
                }
            }

            updateSubscriptionsTable(data) {
                const tbody = document.getElementById('staffSubscriptionsTableBody');
                if (!tbody) return;

                if (!data.subscriptions || data.subscriptions.length === 0) {
                    this.showEmptySubscriptionsTable();
                    return;
                }

                tbody.innerHTML = data.subscriptions.map(sub => `
                    <tr>
                        <td>
                            <div class="table-user">
                                <div class="table-user-avatar">
                                    ${sub.userEmail.charAt(0).toUpperCase()}
                                </div>
                                <div class="table-user-info">
                                    <div class="table-user-name">${sub.userEmail}</div>
                                </div>
                            </div>
                        </td>
                        <td>${sub.productName}</td>
                        <td>${this.formatDate(sub.createdAt)}</td>
                        <td>${this.formatDate(sub.expiresAt)}</td>
                        <td>
                            <span class="table-status ${sub.isActive ? 'active' : 'expired'}">
                                ${sub.isActive ? 'Active' : 'Expired'}
                            </span>
                        </td>
                        <td>
                            <div class="table-actions">
                                <button class="table-action-btn" onclick="viewSubscription('${sub.id}')" title="View Subscription">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"/>
                                    </svg>
                                </button>
                            </div>
                        </td>
                    </tr>
                `).join('');
            }

            updateLogsTable(data) {
                const tbody = document.getElementById('staffLogsTableBody');
                if (!tbody) return;

                if (!data.logs || data.logs.length === 0) {
                    this.showEmptyLogsTable();
                    return;
                }

                tbody.innerHTML = data.logs.map(log => `
                    <tr>
                        <td>${this.formatDate(log.createdAt)}</td>
                        <td>
                            <span class="table-status ${this.getActionType(log.action)}">${log.action}</span>
                        </td>
                        <td>${log.userEmail || 'System'}</td>
                        <td>${log.details || 'No details'}</td>
                        <td>${log.ipAddress || 'N/A'}</td>
                    </tr>
                `).join('');
            }

            // Empty state methods
            showEmptyUsersTable() {
                const tbody = document.getElementById('staffUsersTableBody');
                if (tbody) {
                    tbody.innerHTML = `
                        <tr>
                            <td colspan="6">
                                <div class="admin-empty-state">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
                                    </svg>
                                    <h3>No Users Found</h3>
                                    <p>No users match your current search criteria</p>
                                </div>
                            </td>
                        </tr>
                    `;
                }
            }

            showEmptySupportTickets() {
                const container = document.getElementById('supportTicketsList');
                if (container) {
                    container.innerHTML = `
                        <div class="admin-empty-state">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12,3C13.75,3 15.3,3.5 16.65,4.45C17.45,5 18.05,5.73 18.46,6.6H21V9H19.5C19.66,9.65 19.75,10.31 19.75,11A7.75,7.75 0 0,1 12,18.75C10.25,18.75 8.7,18.25 7.35,17.3C6.55,16.8 5.95,16.07 5.54,15.2H3V12.8H4.5C4.34,12.15 4.25,11.49 4.25,10.8A7.75,7.75 0 0,1 12,3M12,7A4,4 0 0,0 8,11A4,4 0 0,0 12,15A4,4 0 0,0 16,11A4,4 0 0,0 12,7Z"/>
                            </svg>
                            <h3>No Support Tickets</h3>
                            <p>All caught up! No support tickets require attention.</p>
                        </div>
                    `;
                }
            }

            showEmptyKeysTable() {
                const tbody = document.getElementById('staffKeysTableBody');
                if (tbody) {
                    tbody.innerHTML = `
                        <tr>
                            <td colspan="6">
                                <div class="admin-empty-state">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M7,14A3,3 0 0,0 10,17A3,3 0 0,0 13,14A3,3 0 0,0 10,11A3,3 0 0,0 7,14M12.65,10C11.83,7.67 9.61,6 7,6A6,6 0 0,0 1,12A6,6 0 0,0 7,18C9.61,18 11.83,16.33 12.65,14H17V18H21V14H23V10H12.65Z"/>
                                    </svg>
                                    <h3>No Keys Found</h3>
                                    <p>No keys match your current search criteria</p>
                                </div>
                            </td>
                        </tr>
                    `;
                }
            }

            showEmptySubscriptionsTable() {
                const tbody = document.getElementById('staffSubscriptionsTableBody');
                if (tbody) {
                    tbody.innerHTML = `
                        <tr>
                            <td colspan="6">
                                <div class="admin-empty-state">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z"/>
                                    </svg>
                                    <h3>No Subscriptions Found</h3>
                                    <p>No subscriptions match your current search criteria</p>
                                </div>
                            </td>
                        </tr>
                    `;
                }
            }

            showEmptyLogsTable() {
                const tbody = document.getElementById('staffLogsTableBody');
                if (tbody) {
                    tbody.innerHTML = `
                        <tr>
                            <td colspan="5">
                                <div class="admin-empty-state">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                                    </svg>
                                    <h3>No Activity Logs</h3>
                                    <p>No activity logs match your search criteria</p>
                                </div>
                            </td>
                        </tr>
                    `;
                }
            }

            // Pagination methods
            updateUsersPagination(pagination) {
                this.updatePagination('users', pagination);
            }

            updateKeysPagination(pagination) {
                this.updatePagination('keys', pagination);
            }

            updateSubscriptionsPagination(pagination) {
                this.updatePagination('subscriptions', pagination);
            }

            updateLogsPagination(pagination) {
                this.updatePagination('logs', pagination);
            }

            updatePagination(type, pagination) {
                if (!pagination) return;

                const startElement = document.getElementById(`staff${type.charAt(0).toUpperCase() + type.slice(1)}Start`);
                const endElement = document.getElementById(`staff${type.charAt(0).toUpperCase() + type.slice(1)}End`);
                const totalElement = document.getElementById(`staff${type.charAt(0).toUpperCase() + type.slice(1)}Total`);
                const controlsElement = document.getElementById(`staff${type.charAt(0).toUpperCase() + type.slice(1)}PaginationControls`);

                if (startElement) startElement.textContent = pagination.start;
                if (endElement) endElement.textContent = pagination.end;
                if (totalElement) totalElement.textContent = pagination.total;

                if (controlsElement) {
                    controlsElement.innerHTML = this.generatePaginationControls(type, pagination);
                }
            }

            generatePaginationControls(type, pagination) {
                const { page, totalPages } = pagination;
                let controls = '';

                // Previous button
                controls += `
                    <button class="pagination-btn ${page <= 1 ? 'disabled' : ''}" 
                            onclick="staffManager.changePage('${type}', ${page - 1})" 
                            ${page <= 1 ? 'disabled' : ''}>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"/>
                        </svg>
                    </button>
                `;

                // Page numbers
                const startPage = Math.max(1, page - 2);
                const endPage = Math.min(totalPages, page + 2);

                for (let i = startPage; i <= endPage; i++) {
                    controls += `
                        <button class="pagination-btn ${i === page ? 'active' : ''}"
                                onclick="staffManager.changePage('${type}', ${i})">
                            ${i}
                        </button>
                    `;
                }

                // Next button
                controls += `
                    <button class="pagination-btn ${page >= totalPages ? 'disabled' : ''}"
                            onclick="staffManager.changePage('${type}', ${page + 1})"
                            ${page >= totalPages ? 'disabled' : ''}>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"/>
                        </svg>
                    </button>
                `;

                return controls;
            }

            changePage(type, page) {
                this.currentPage[type] = page;
                
                switch(type) {
                    case 'users':
                        this.loadUsers(page);
                        break;
                    case 'keys':
                        this.loadKeys(page);
                        break;
                    case 'subscriptions':
                        this.loadSubscriptions(page);
                        break;
                    case 'logs':
                        this.loadActivityLogs(page);
                        break;
                }
            }

            getActionType(action) {
                if (action.includes('CREATE') || action.includes('GENERATE')) return 'create';
                if (action.includes('UPDATE') || action.includes('EDIT')) return 'update';
                if (action.includes('DELETE') || action.includes('REMOVE')) return 'delete';
                if (action.includes('LOGIN')) return 'login';
                return 'update';
            }

            getActionIcon(action) {
                const icons = {
                    create: '<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/></svg>',
                    update: '<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg>',
                    delete: '<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"/></svg>',
                    login: '<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M10,17V14H3V10H10V7L15,12L10,17M10,2H19A2,2 0 0,1 21,4V20A2,2 0 0,1 19,22H10A2,2 0 0,1 8,20V18H10V20H19V4H10V6H8V4A2,2 0 0,1 10,2Z"/></svg>'
                };
                
                const type = this.getActionType(action);
                return icons[type] || icons.update;
            }

            toggleCustomDateRange() {
                const dateRange = document.getElementById('reportDateRange').value;
                const customStart = document.getElementById('customDateRange');
                const customEnd = document.getElementById('customDateRangeEnd');
                
                if (dateRange === 'custom') {
                    customStart.style.display = 'block';
                    customEnd.style.display = 'block';
                } else {
                    customStart.style.display = 'none';
                    customEnd.style.display = 'none';
                }
            }

            async generateReport(e) {
                e.preventDefault();
                
                const formData = new FormData(e.target);
                const reportData = {
                    type: formData.get('reportType'),
                    dateRange: formData.get('dateRange'),
                    startDate: formData.get('startDate'),
                    endDate: formData.get('endDate')
                };

                try {
                    this.showLoading('Generating report...');
                    
                    const response = await fetch(`${API_BASE_URL}/staff/reports/generate`, {
                        method: 'POST',
                        headers: {
                            ...this.getAuthHeaders(),
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(reportData)
                    });

                    if (response.ok) {
                        const data = await response.json();
                        this.showSuccess('Report generated successfully!');
                        this.loadRecentReports();
                        document.getElementById('reportGenerationForm').reset();
                    } else {
                        const error = await response.json();
                        this.showError(error.message || 'Failed to generate report');
                    }
                } catch (error) {
                    console.error('Report generation error:', error);
                    this.showError('Failed to generate report');
                } finally {
                    this.hideLoading();
                }
            }

            async loadRecentReports() {
                try {
                    const response = await fetch(`${API_BASE_URL}/staff/reports/recent`, {
                        headers: this.getAuthHeaders()
                    });

                    if (response.ok) {
                        const data = await response.json();
                        this.updateRecentReportsDisplay(data.reports || []);
                    }
                } catch (error) {
                    console.error('Error loading recent reports:', error);
                }
            }

            updateRecentReportsDisplay(reports) {
                const container = document.getElementById('recentReportsList');
                if (!container) return;

                if (reports.length === 0) {
                    container.innerHTML = `
                        <div class="admin-empty-state">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M22,21H2V3H4V19H6V17H10V19H12V16H16V19H18V17H22V21Z"/>
                            </svg>
                            <h3>No Reports Generated</h3>
                            <p>Generate your first report using the form above</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = reports.map(report => `
                    <div class="report-item">
                        <div class="report-info">
                            <div class="report-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M22,21H2V3H4V19H6V17H10V19H12V16H16V19H18V17H22V21Z"/>
                                </svg>
                            </div>
                            <div class="report-details">
                                <h4>${report.name}</h4>
                                <p>Generated ${this.formatTimeAgo(report.createdAt)}  ${report.type}</p>
                            </div>
                        </div>
                        <div class="report-actions">
                            <button class="table-action-btn" onclick="downloadReport('${report.id}')" title="Download Report">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"/>
                                </svg>
                            </button>
                            <button class="table-action-btn danger" onclick="deleteReport('${report.id}')" title="Delete Report">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            startAutoRefresh() {
                // Refresh data every 5 minutes
                setInterval(() => {
                    this.loadStaffOverview();
                }, 5 * 60 * 1000);
            }

            // Utility functions
            formatDate(dateString) {
                if (!dateString) return 'N/A';
                const date = new Date(dateString);
                return date.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }

            formatTimeAgo(dateString) {
                if (!dateString) return '';
                const date = new Date(dateString);
                const now = new Date();
                const diff = now - date;
                
                const minutes = Math.floor(diff / 60000);
                const hours = Math.floor(diff / 3600000);
                const days = Math.floor(diff / 86400000);
                
                if (days > 0) return `${days}d ago`;
                if (hours > 0) return `${hours}h ago`;
                if (minutes > 0) return `${minutes}m ago`;
                return 'Just now';
            }

            getAuthHeaders() {
                const token = localStorage.getItem('token');
                return {
                    'Authorization': `Bearer ${token}`,
                    'Content-Type': 'application/json'
                };
            }

            showLoading(message = 'Loading...') {
                const overlay = document.getElementById('loadingOverlay');
                const text = overlay.querySelector('p');
                text.textContent = message;
                overlay.style.display = 'flex';
            }

            hideLoading() {
                document.getElementById('loadingOverlay').style.display = 'none';
            }

            showError(message) {
                this.showToast(message, 'error');
            }

            showSuccess(message) {
                this.showToast(message, 'success');
            }

            showToast(message, type = 'info') {
                // Remove existing toasts
                const existingToasts = document.querySelectorAll('.toast');
                existingToasts.forEach(toast => toast.remove());
                
                const toast = document.createElement('div');
                toast.className = `toast toast-${type}`;
                
                const icons = {
                    success: '<path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>',
                    error: '<path d="M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/>',
                    info: '<path d="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/>'
                };
                
                toast.innerHTML = `
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        ${icons[type] || icons.info}
                    </svg>
                    <span>${message}</span>
                    <button onclick="this.parentElement.remove()" class="toast-close">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
                        </svg>
                    </button>
                `;
                
                document.body.appendChild(toast);
                
                setTimeout(() => toast.classList.add('show'), 100);
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => {
                        if (toast.parentElement) {
                            toast.remove();
                        }
                    }, 300);
                }, type === 'error' ? 6000 : 4000);
            }
        }

        // Global functions for UI interactions
        function showStaffSection(sectionName) {
            // Update sidebar
            document.querySelectorAll('.admin-menu-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector(`[onclick="showStaffSection('${sectionName}')"]`).classList.add('active');
            
            // Update sections
            document.querySelectorAll('.admin-section-content').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(`${sectionName}-section`).classList.add('active');

            // Load section data on first view
            switch(sectionName) {
                case 'users':
                    if (staffManager) staffManager.loadUsers();
                    break;
                case 'support':
                    if (staffManager) staffManager.loadSupportTickets();
                    break;
                case 'keys':
                    if (staffManager) staffManager.loadKeys();
                    break;
                case 'subscriptions':
                    if (staffManager) staffManager.loadSubscriptions();
                    break;
                case 'activity':
                    if (staffManager) staffManager.loadActivityLogs();
                    break;
                case 'reports':
                    if (staffManager) staffManager.loadRecentReports();
                    break;
            }
        }

        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('show');
        }

        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            window.location.href = 'login.html';
        }

        // Action functions
        function viewUser(userId) {
            staffManager.showToast('User details view coming soon!', 'info');
        }

        function editUser(userId) {
            staffManager.showToast('User editing coming soon!', 'info');
        }

        function viewSubscription(subscriptionId) {
            staffManager.showToast('Subscription details view coming soon!', 'info');
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                staffManager.showSuccess('Copied to clipboard!');
            }).catch(() => {
                staffManager.showError('Failed to copy to clipboard');
            });
        }

        function revokeKey(keyId) {
            if (confirm('Are you sure you want to revoke this key? This action cannot be undone.')) {
                staffManager.showToast('Key revocation functionality coming soon!', 'info');
            }
        }

        function downloadReport(reportId) {
            staffManager.showToast('Report download coming soon!', 'info');
        }

        function deleteReport(reportId) {
            if (confirm('Are you sure you want to delete this report?')) {
                staffManager.showToast('Report deletion functionality coming soon!', 'info');
            }
        }

        function exportUsers() {
            staffManager.showToast('User export functionality coming soon!', 'info');
        }

        function exportStaffKeys() {
            staffManager.showToast('Keys export functionality coming soon!', 'info');
        }

        function showCreateUserModal() {
            staffManager.showToast('User creation modal coming soon!', 'info');
        }

        function showStaffGenerateKeysModal() {
            staffManager.showToast('Key generation modal coming soon!', 'info');
        }

        function showMassMessageModal() {
            staffManager.showToast('Mass message functionality coming soon!', 'info');
        }

        function showUserLookupModal() {
            staffManager.showToast('User lookup functionality coming soon!', 'info');
        }

        function showBulkKeyModal() {
            staffManager.showToast('Bulk key generation coming soon!', 'info');
        }

        // Table sorting functions
        function sortStaffUsersTable(column) {
            staffManager.showToast('Table sorting coming soon!', 'info');
        }

        function sortStaffKeysTable(column) {
            staffManager.showToast('Table sorting coming soon!', 'info');
        }

        function sortStaffSubscriptionsTable(column) {
            staffManager.showToast('Table sorting coming soon!', 'info');
        }

        function sortStaffLogsTable(column) {
            staffManager.showToast('Table sorting coming soon!', 'info');
        }

        // Initialize staff manager
        let staffManager;
        document.addEventListener('DOMContentLoaded', function() {
            staffManager = new StaffManager();
            
            // Close dropdowns when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.user-menu')) {
                    document.getElementById('userDropdown').classList.remove('show');
                }
            });
        });
    </script>

    <!-- Additional Styles for Staff-specific components -->
    <style>
        /* Permission Groups */
        .permission-groups {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .permission-group {
            background: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 2rem;
        }

        .permission-group-title {
            font-size: var(--font-size-lg);
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .permission-items {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .permission-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            background: var(--tertiary-bg);
            border-radius: var(--radius-md);
            transition: all var(--transition-fast);
        }

        .permission-item:hover {
            background: var(--quaternary-bg);
        }

        .permission-info {
            flex: 1;
        }

        .permission-name {
            font-weight: 600;
            color: var(--text-primary);
            display: block;
            margin-bottom: 0.25rem;
        }

        .permission-description {
            font-size: var(--font-size-sm);
            color: var(--text-secondary);
        }

        .permission-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-sm);
            font-size: var(--font-size-sm);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .permission-status.granted {
            background: rgba(63, 185, 80, 0.1);
            color: var(--accent-green);
        }

        .permission-status.denied {
            background: rgba(248, 81, 73, 0.1);
            color: var(--accent-red);
        }

        .permission-status.limited {
            background: rgba(255, 140, 66, 0.1);
            color: var(--accent-orange);
        }

        /* Support Tickets */
        .support-tickets-list {
            padding: 1.5rem;
        }

        .support-ticket-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.5rem;
            background: var(--tertiary-bg);
            border-radius: var(--radius-md);
            margin-bottom: 1rem;
            transition: all var(--transition-fast);
            cursor: pointer;
        }

        .support-ticket-item:hover {
            background: var(--quaternary-bg);
            transform: translateX(4px);
        }

        .support-ticket-item:last-child {
            margin-bottom: 0;
        }

        .ticket-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex: 1;
        }

        .ticket-priority {
            width: 8px;
            height: 40px;
            border-radius: 4px;
        }

        .ticket-priority.high {
            background: var(--accent-red);
        }

        .ticket-priority.medium {
            background: var(--accent-orange);
        }

        .ticket-priority.low {
            background: var(--accent-green);
        }

        .ticket-details h4 {
            font-size: var(--font-size-base);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .ticket-details p {
            font-size: var(--font-size-sm);
            color: var(--text-secondary);
            margin: 0;
        }

        .ticket-meta {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 0.5rem;
        }

        .ticket-status {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.25rem 0.75rem;
            border-radius: var(--radius-sm);
            font-size: var(--font-size-xs);
            font-weight: 600;
            text-transform: uppercase;
        }

        .ticket-status.open {
            background: rgba(88, 166, 255, 0.1);
            color: var(--accent-blue);
        }

        .ticket-status.in-progress {
            background: rgba(255, 140, 66, 0.1);
            color: var(--accent-orange);
        }

        .ticket-status.resolved {
            background: rgba(63, 185, 80, 0.1);
            color: var(--accent-green);
        }

        .ticket-status.closed {
            background: rgba(139, 148, 158, 0.1);
            color: var(--text-muted);
        }

        .ticket-time {
            font-size: var(--font-size-xs);
            color: var(--text-muted);
        }

        /* Quick Actions Grid */
        .support-quick-actions {
            margin-top: 2rem;
            background: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 2rem;
        }

        .support-quick-actions h3 {
            color: var(--text-primary);
            margin-bottom: 1.5rem;
        }

        .quick-actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .quick-action-card {
            background: var(--tertiary-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 2rem;
            text-align: center;
            transition: all var(--transition-normal);
            cursor: pointer;
            border: none;
            color: inherit;
            font-family: inherit;
        }

        .quick-action-card:hover {
            transform: translateY(-4px);
            border-color: var(--accent-blue);
            box-shadow: var(--shadow-large);
        }

        .quick-action-icon {
            width: 48px;
            height: 48px;
            background: var(--gradient-primary);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            color: white;
        }

        .quick-action-card h4 {
            color: var(--text-primary);
            font-size: var(--font-size-lg);
            margin-bottom: 0.5rem;
        }

        .quick-action-card p {
            color: var(--text-secondary);
            font-size: var(--font-size-sm);
            margin: 0;
        }

        /* Reports List */
        .reports-list {
            padding: 1.5rem;
        }

        .report-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.5rem;
            background: var(--tertiary-bg);
            border-radius: var(--radius-md);
            margin-bottom: 1rem;
            transition: all var(--transition-fast);
        }

        .report-item:hover {
            background: var(--quaternary-bg);
        }

        .report-item:last-child {
            margin-bottom: 0;
        }

        .report-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .report-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient-primary);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .report-details h4 {
            color: var(--text-primary);
            font-size: var(--font-size-base);
            margin-bottom: 0.25rem;
        }

        .report-details p {
            color: var(--text-secondary);
            font-size: var(--font-size-sm);
            margin: 0;
        }

        .report-actions {
            display: flex;
            gap: 0.5rem;
        }

        /* Toast Styles (if not already defined) */
        .toast {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: 1rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            box-shadow: var(--shadow-large);
            z-index: 10001;
            transform: translateX(100%);
            opacity: 0;
            transition: all var(--transition-normal);
            max-width: 400px;
            min-width: 300px;
        }

        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }

        .toast-success {
            border-left: 4px solid var(--accent-green);
        }

        .toast-success svg {
            color: var(--accent-green);
        }

        .toast-error {
            border-left: 4px solid var(--accent-red);
        }

        .toast-error svg {
            color: var(--accent-red);
        }

        .toast-info {
            border-left: 4px solid var(--accent-blue);
        }

        .toast-info svg {
            color: var(--accent-blue);
        }

        .toast span {
            flex: 1;
            color: var(--text-primary);
            font-size: var(--font-size-sm);
        }

        .toast-close {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 0.25rem;
            border-radius: 4px;
            transition: all var(--transition-fast);
        }

        .toast-close:hover {
            color: var(--text-primary);
            background: var(--tertiary-bg);
        }

        /* Form Enhancements */
        .report-form {
            margin-bottom: 2rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .permission-groups {
                grid-template-columns: 1fr;
            }

            .permission-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .permission-status {
                align-self: flex-end;
            }

            .quick-actions-grid {
                grid-template-columns: 1fr;
            }

            .support-ticket-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .ticket-meta {
                align-items: flex-start;
                width: 100%;
            }

            .report-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .report-actions {
                width: 100%;
                justify-content: flex-end;
            }

            .toast {
                right: 1rem;
                left: 1rem;
                min-width: auto;
                max-width: none;
            }
        }

        @media (max-width: 480px) {
            .support-quick-actions {
                padding: 1.5rem;
            }

            .quick-action-card {
                padding: 1.5rem;
            }

            .quick-action-icon {
                width: 40px;
                height: 40px;
                margin-bottom: 0.75rem;
            }

            .permission-group {
                padding: 1.5rem;
            }

            .support-ticket-item,
            .report-item {
                padding: 1rem;
            }
        }

        /* Print Styles */
        @media print {
            .admin-sidebar,
            .admin-action-bar,
            .table-actions,
            .admin-pagination,
            .support-quick-actions,
            .toast {
                display: none;
            }

            .admin-container {
                flex-direction: column;
                gap: 1rem;
            }

            .admin-card,
            .admin-table-container,
            .admin-form-container {
                break-inside: avoid;
            }

            body {
                background: white !important;
                color: black !important;
            }
        }

        /* Dark mode enhancements */
        @media (prefers-color-scheme: dark) {
            .admin-card,
            .admin-table-container,
            .admin-form-container,
            .permission-group,
            .support-quick-actions {
                background: rgba(22, 27, 34, 0.95);
                backdrop-filter: blur(12px);
            }
        }

        /* High contrast mode */
        @media (prefers-contrast: high) {
            .admin-card,
            .admin-table-container,
            .admin-form-container,
            .permission-group {
                border-width: 2px;
            }

            .admin-form-input,
            .admin-form-select {
                border-width: 3px;
            }
        }

        /* Reduced motion */
        @media (prefers-reduced-motion: reduce) {
            .admin-card,
            .admin-menu-link,
            .admin-btn,
            .table-action-btn,
            .quick-action-card,
            .support-ticket-item,
            .report-item,
            .toast {
                transition: none;
            }

            .admin-loading .spinner {
                animation: none;
            }
        }
    </style>
</body>
</html>