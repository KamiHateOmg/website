<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products - CS2 Loader Premium Plans</title>
    <meta name="description" content="Choose from our flexible CS2 Loader subscription plans">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="../assets/images/favicon.ico">
    
    <!-- Styles -->
    <link rel="stylesheet" href="../assets/css/main.css">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="index.html" class="logo">
                    <div class="logo-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8Z"/>
                        </svg>
                    </div>
                    <span class="logo-text">CS2 Loader</span>
                </a>
            </div>
            
            <div class="nav-links">
                <a href="index.html" class="nav-link">Home</a>
                <a href="products.html" class="nav-link active">Products</a>
                <a href="index.html#features" class="nav-link">Features</a>
                <a href="index.html#about" class="nav-link">About</a>
            </div>
            
            <div class="nav-actions">
                <div class="auth-buttons" id="authButtons">
                    <a href="login.html" class="btn btn-outline">Login</a>
                    <a href="register.html" class="btn btn-primary">Sign Up</a>
                </div>
                <div class="user-menu" id="userMenu" style="display: none;">
                    <div class="user-avatar" onclick="toggleUserDropdown()">
                        <span id="userInitials">U</span>
                    </div>
                    <div class="user-dropdown" id="userDropdown">
                        <div class="dropdown-header">
                            <span id="userName">User</span>
                            <span id="userRole" class="user-role">user</span>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a href="dashboard.html" class="dropdown-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M13,3V9H21V3M13,21H21V11H13M3,21H11V15H3M3,13H11V3H3V13Z"/>
                            </svg>
                            Dashboard
                        </a>
                        <div class="dropdown-divider"></div>
                        <button onclick="logout()" class="dropdown-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M16,17V14H9V10H16V7L21,12L16,17M14,2A2,2 0 0,1 16,4V6H14V4H5V20H14V18H16V20A2,2 0 0,1 14,22H5A2,2 0 0,1 3,20V4A2,2 0 0,1 5,2H14Z"/>
                            </svg>
                            Logout
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Products Hero -->
    <section class="products-hero">
        <div class="container">
            <div class="products-header">
                <h1 class="products-title">
                    Choose Your <span class="text-gradient">CS2 Loader</span> Plan
                </h1>
                <p class="products-description">
                    Flexible subscription options designed for every type of gamer. 
                    All plans include full access to CS2 Loader with premium features and support.
                </p>
                
                <div class="billing-toggle">
                    <span class="billing-label">Monthly</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="billingToggle">
                        <span class="toggle-slider"></span>
                    </label>
                    <span class="billing-label">
                        Yearly <span class="discount-badge">Save 20%</span>
                    </span>
                </div>
            </div>
        </div>
    </section>

    <!-- Products Grid -->
    <section class="products-section">
        <div class="container">
            <div class="products-grid" id="productsGrid">
                <!-- Products will be loaded dynamically -->
                <div class="loading-products">
                    <div class="spinner"></div>
                    <p>Loading subscription plans...</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Comparison -->
    <section class="features-comparison">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">What's Included</h2>
                <p class="section-description">
                    All plans include these powerful features
                </p>
            </div>
            
            <div class="features-table">
                <div class="features-list">
                    <div class="feature-item">
                        <div class="feature-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                            </svg>
                        </div>
                        <div class="feature-content">
                            <h3>Advanced Security</h3>
                            <p>HWID-locked subscriptions with enterprise-grade encryption</p>
                        </div>
                    </div>
                    
                    <div class="feature-item">
                        <div class="feature-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                            </svg>
                        </div>
                        <div class="feature-content">
                            <h3>Anti-Detection Technology</h3>
                            <p>Advanced bypass systems to ensure undetected operation</p>
                        </div>
                    </div>
                    
                    <div class="feature-item">
                        <div class="feature-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                            </svg>
                        </div>
                        <div class="feature-content">
                            <h3>Regular Updates</h3>
                            <p>Continuous updates for CS2 compatibility and new features</p>
                        </div>
                    </div>
                    
                    <div class="feature-item">
                        <div class="feature-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                            </svg>
                        </div>
                        <div class="feature-content">
                            <h3>Performance Optimization</h3>
                            <p>Minimal system impact with intelligent resource management</p>
                        </div>
                    </div>
                    
                    <div class="feature-item">
                        <div class="feature-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                            </svg>
                        </div>
                        <div class="feature-content">
                            <h3>24/7 Support</h3>
                            <p>Professional support team available around the clock</p>
                        </div>
                    </div>
                    
                    <div class="feature-item">
                        <div class="feature-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                            </svg>
                        </div>
                        <div class="feature-content">
                            <h3>Web Dashboard</h3>
                            <p>Easy-to-use web interface for subscription management</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section class="faq-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Frequently Asked Questions</h2>
                <p class="section-description">
                    Common questions about CS2 Loader subscriptions
                </p>
            </div>
            
            <div class="faq-list">
                <div class="faq-item">
                    <button class="faq-question" onclick="toggleFAQ(this)">
                        <span>How does HWID locking work?</span>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
                        </svg>
                    </button>
                    <div class="faq-answer">
                        <p>Each key is locked to your specific hardware configuration. This ensures that only you can use your subscription and prevents unauthorized sharing.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <button class="faq-question" onclick="toggleFAQ(this)">
                        <span>Can I change my hardware after purchasing?</span>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
                        </svg>
                    </button>
                    <div class="faq-answer">
                        <p>If you need to change your hardware, contact our support team. We can transfer your subscription to new hardware in most cases.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <button class="faq-question" onclick="toggleFAQ(this)">
                        <span>What happens when my subscription expires?</span>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
                        </svg>
                    </button>
                    <div class="faq-answer">
                        <p>When your subscription expires, the CS2 Loader will stop working. You can renew by purchasing a new key and redeeming it in your dashboard.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <button class="faq-question" onclick="toggleFAQ(this)">
                        <span>Is CS2 Loader safe to use?</span>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
                        </svg>
                    </button>
                    <div class="faq-answer">
                        <p>CS2 Loader uses advanced anti-detection technology and is regularly updated to maintain compatibility and safety. However, use at your own discretion as with any third-party software.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <button class="faq-question" onclick="toggleFAQ(this)">
                        <span>Do you offer refunds?</span>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
                        </svg>
                    </button>
                    <div class="faq-answer">
                        <p>We offer refunds within 24 hours of purchase if you haven't redeemed your key yet. Contact support for assistance with refund requests.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <div class="logo">
                        <div class="logo-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8Z"/>
                            </svg>
                        </div>
                        <span class="logo-text">CS2 Loader</span>
                    </div>
                    <p class="footer-description">
                        Professional CS2 enhancement platform for competitive gaming.
                    </p>
                </div>
                
                <div class="footer-links">
                    <div class="footer-column">
                        <h3 class="footer-title">Product</h3>
                        <a href="products.html" class="footer-link">Pricing</a>
                        <a href="index.html#features" class="footer-link">Features</a>
                        <a href="dashboard.html" class="footer-link">Dashboard</a>
                    </div>
                    
                    <div class="footer-column">
                        <h3 class="footer-title">Support</h3>
                        <a href="#" class="footer-link">Documentation</a>
                        <a href="#" class="footer-link">Help Center</a>
                        <a href="#" class="footer-link">Contact Support</a>
                        <a href="#" class="footer-link">Status</a>
                    </div>
                    
                    <div class="footer-column">
                        <h3 class="footer-title">Legal</h3>
                        <a href="#" class="footer-link">Terms of Service</a>
                        <a href="#" class="footer-link">Privacy Policy</a>
                        <a href="#" class="footer-link">EULA</a>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="footer-copyright">
                    <p>&copy; 2025 CS2 Loader. All rights reserved.</p>
                </div>
                <div class="footer-social">
                    <a href="#" class="social-link" aria-label="Discord">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.197.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418Z"/>
                        </svg>
                    </a>
                    <a href="#" class="social-link" aria-label="Twitter">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M22.46,6C21.69,6.35 20.86,6.58 20,6.69C20.88,6.16 21.56,5.32 21.88,4.31C21.05,4.81 20.13,5.16 19.16,5.36C18.37,4.5 17.26,4 16,4C13.65,4 11.73,5.92 11.73,8.29C11.73,8.63 11.77,8.96 11.84,9.27C8.28,9.09 5.11,7.38 3,4.79C2.63,5.42 2.42,6.16 2.42,6.94C2.42,8.43 3.17,9.75 4.33,10.5C3.62,10.5 2.96,10.3 2.38,10C2.38,10 2.38,10 2.38,10.03C2.38,12.11 3.86,13.85 5.82,14.24C5.46,14.34 5.08,14.39 4.69,14.39C4.42,14.39 4.15,14.36 3.89,14.31C4.43,16 6,17.26 7.89,17.29C6.43,18.45 4.58,19.13 2.56,19.13C2.22,19.13 1.88,19.11 1.54,19.07C3.44,20.29 5.7,21 8.12,21C16,21 20.33,14.46 20.33,8.79C20.33,8.6 20.33,8.42 20.32,8.23C21.16,7.63 21.88,6.87 22.46,6Z"/>
                        </svg>
                    </a>
                    <a href="#" class="social-link" aria-label="GitHub">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Purchase Modal -->
    <div id="purchaseModal" class="modal" style="display: none;">
        <div class="modal-overlay" onclick="closePurchaseModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirm Purchase</h3>
                <button onclick="closePurchaseModal()" class="modal-close">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="purchase-summary">
                    <div class="product-info">
                        <h4 id="modalProductName">Product Name</h4>
                        <p id="modalProductDescription">Product description</p>
                        <div class="product-features">
                            <div class="feature">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                                </svg>
                                <span id="modalDuration">Duration</span>
                            </div>
                            <div class="feature">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                                </svg>
                                <span>HWID-locked security</span>
                            </div>
                            <div class="feature">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                                </svg>
                                <span>24/7 Support</span>
                            </div>
                        </div>
                    </div>
                    <div class="price-info">
                        <div class="total-price">
                            <span>Total: </span>
                            <span id="modalPrice" class="price">$0.00</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closePurchaseModal()" class="btn btn-outline">Cancel</button>
                <button onclick="confirmPurchase()" class="btn btn-primary" id="confirmPurchaseBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19,7H22V9H19V12H17V9H14V7H17V4H19V7M12,2A3,3 0 0,1 15,5V6H19A2,2 0 0,1 21,8V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V8A2,2 0 0,1 5,6H9V5A3,3 0 0,1 12,2M12,4A1,1 0 0,0 11,5V6H13V5A1,1 0 0,0 12,4Z"/>
                    </svg>
                    Purchase Now
                </button>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal" style="display: none;">
        <div class="modal-overlay"></div>
        <div class="modal-content success-modal">
            <div class="success-icon">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                </svg>
            </div>
            <h3>Purchase Successful!</h3>
            <p>Your key has been generated and is ready to use.</p>
            <div class="key-display">
                <label>Your Key:</label>
                <div class="key-code" id="generatedKey">XXXX-XXXX-XXXX-XXXX</div>
                <button onclick="copyKey()" class="btn btn-outline btn-small">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
                    </svg>
                    Copy Key
                </button>
            </div>
            <div class="success-actions">
                <a href="dashboard.html" class="btn btn-primary">Go to Dashboard</a>
                <button onclick="closeSuccessModal()" class="btn btn-outline">Continue Shopping</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Processing purchase...</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../assets/js/api.js"></script>
    <script src="../assets/js/auth.js"></script>
    <script src="../assets/js/products.js"></script>
    
    <script>
        // Global variables
        let products = [];
        let selectedProduct = null;

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            checkAuthStatus();
            loadProducts();
            initializeBillingToggle();
        });

        // Load products from API
        async function loadProducts() {
            try {
                showLoading();
                const response = await fetch(`${API_BASE_URL}/products`);
                const data = await response.json();
                
                if (response.ok) {
                    products = data.products;
                    renderProducts();
                } else {
                    showError('Failed to load products');
                }
            } catch (error) {
                console.error('Error loading products:', error);
                showError('Failed to load products');
            } finally {
                hideLoading();
            }
        }

        // Render products grid
        function renderProducts() {
            const grid = document.getElementById('productsGrid');
            
            if (products.length === 0) {
                grid.innerHTML = `
                    <div class="no-products">
                        <h3>No products available</h3>
                        <p>Please check back later for subscription plans.</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = products.map(product => `
                <div class="product-card ${product.isFeatured ? 'featured' : ''}" data-product-id="${product.id}">
                    ${product.isFeatured ? '<div class="product-badge">Most Popular</div>' : ''}
                    
                    <div class="product-header">
                        <div class="product-icon">
                            ${getProductIcon(product.durationDays)}
                        </div>
                        <h3 class="product-name">${product.name}</h3>
                        <p class="product-description">${product.description || ''}</p>
                    </div>
                    
                    <div class="product-pricing">
                        <div class="price-display">
                            <span class="price">${product.priceFormatted}</span>
                            <span class="period">/ ${product.durationText.toLowerCase()}</span>
                        </div>
                        ${product.price > 0 ? '<div class="price-note">One-time payment</div>' : '<div class="price-note">Free to try</div>'}
                    </div>
                    
                    <div class="product-features">
                        <div class="feature">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                            </svg>
                            <span>${product.durationText} access</span>
                        </div>
                        <div class="feature">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                            </svg>
                            <span>HWID-locked security</span>
                        </div>
                        <div class="feature">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                            </svg>
                            <span>All premium features</span>
                        </div>
                        <div class="feature">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                            </svg>
                            <span>Regular updates</span>
                        </div>
                        <div class="feature">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                            </svg>
                            <span>24/7 support</span>
                        </div>
                    </div>
                    
                    <button onclick="purchaseProduct('${product.id}')" class="btn ${product.isFeatured ? 'btn-primary' : 'btn-outline'} product-btn">
                        ${product.price === 0 ? 'Get Free Trial' : 'Purchase Now'}
                    </button>
                </div>
            `).join('');
        }

        // Get product icon based on duration
        function getProductIcon(durationDays) {
            if (durationDays === 1) {
                return `<svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/>
                </svg>`;
            } else if (durationDays <= 30) {
                return `<svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M9,10V12H7V10H9M13,10V12H11V10H13M17,10V12H15V10H17M19,3A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5C3.89,21 3,20.1 3,19V5A2,2 0 0,1 5,3H6V1H8V3H16V1H18V3H19M19,19V8H5V19H19M9,14V16H7V14H9M13,14V16H11V14H13M17,14V16H15V14H17Z"/>
                </svg>`;
            } else if (durationDays === 999999) {
                return `<svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z"/>
                </svg>`;
            } else {
                return `<svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z"/>
                </svg>`;
            }
        }

        // Purchase product
        function purchaseProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            // Check if user is logged in
            const token = localStorage.getItem('token');
            if (!token) {
                // Redirect to login
                window.location.href = 'login.html?redirect=products.html';
                return;
            }

            selectedProduct = product;
            showPurchaseModal(product);
        }

        // Show purchase modal
        function showPurchaseModal(product) {
            document.getElementById('modalProductName').textContent = product.name;
            document.getElementById('modalProductDescription').textContent = product.description || '';
            document.getElementById('modalDuration').textContent = product.durationText + ' access';
            document.getElementById('modalPrice').textContent = product.priceFormatted;
            
            document.getElementById('purchaseModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        // Close purchase modal
        function closePurchaseModal() {
            document.getElementById('purchaseModal').style.display = 'none';
            document.body.style.overflow = 'auto';
            selectedProduct = null;
        }

        // Confirm purchase
        async function confirmPurchase() {
            if (!selectedProduct) return;

            const token = localStorage.getItem('token');
            if (!token) {
                window.location.href = 'login.html?redirect=products.html';
                return;
            }

            try {
                showLoading('Processing purchase...');
                closePurchaseModal();

                const response = await fetch(`${API_BASE_URL}/products/${selectedProduct.id}/purchase`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();

                if (response.ok) {
                    showSuccessModal(data.key.code);
                } else {
                    showError(data.error || 'Purchase failed');
                }
            } catch (error) {
                console.error('Purchase error:', error);
                showError('Purchase failed. Please try again.');
            } finally {
                hideLoading();
            }
        }

        // Show success modal
        function showSuccessModal(keyCode) {
            document.getElementById('generatedKey').textContent = keyCode;
            document.getElementById('successModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        // Close success modal
        function closeSuccessModal() {
            document.getElementById('successModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Copy key to clipboard
        async function copyKey() {
            const keyElement = document.getElementById('generatedKey');
            const key = keyElement.textContent;
            
            try {
                await navigator.clipboard.writeText(key);
                
                // Visual feedback
                const originalText = keyElement.textContent;
                keyElement.textContent = 'Copied!';
                keyElement.style.color = 'var(--accent-green)';
                
                setTimeout(() => {
                    keyElement.textContent = originalText;
                    keyElement.style.color = '';
                }, 2000);
            } catch (error) {
                console.error('Failed to copy key:', error);
                showError('Failed to copy key');
            }
        }

        // Initialize billing toggle
        function initializeBillingToggle() {
            const toggle = document.getElementById('billingToggle');
            toggle.addEventListener('change', function() {
                // This would switch between monthly/yearly pricing
                // For now, we'll just show a message
                if (this.checked) {
                    showInfo('Yearly billing coming soon!');
                }
            });
        }

        // FAQ toggle
        function toggleFAQ(button) {
            const faqItem = button.parentElement;
            const answer = faqItem.querySelector('.faq-answer');
            const icon = button.querySelector('svg');
            
            faqItem.classList.toggle('active');
            
            if (faqItem.classList.contains('active')) {
                answer.style.maxHeight = answer.scrollHeight + 'px';
                icon.style.transform = 'rotate(180deg)';
            } else {
                answer.style.maxHeight = '0px';
                icon.style.transform = 'rotate(0deg)';
            }
        }

        // Utility functions
        function showLoading(message = 'Loading...') {
            const overlay = document.getElementById('loadingOverlay');
            const text = overlay.querySelector('p');
            text.textContent = message;
            overlay.style.display = 'flex';
        }

        function hideLoading() {
            document.getElementById('loadingOverlay').style.display = 'none';
        }

        function showError(message) {
            // Create toast notification
            const toast = document.createElement('div');
            toast.className = 'toast toast-error';
            toast.innerHTML = `
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/>
                </svg>
                <span>${message}</span>
            `;
            
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 5000);
        }

        function showInfo(message) {
            const toast = document.createElement('div');
            toast.className = 'toast toast-info';
            toast.innerHTML = `
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/>
                </svg>
                <span>${message}</span>
            `;
            
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 3000);
        }
    </script>
</body>
</html>